TYPE=VIEW
query=select `v_plan`.`plan_id` AS `plan_id`,`v_plan`.`objectif_id` AS `objectif_id`,`v_plan`.`code_wbs` AS `code_wbs`,`v_plan`.`niveau` AS `niveau`,`v_plan`.`poids` AS `poids`,`v_plan`.`type_objectif_libelle` AS `type_element_libelle`,`v_plan`.`type_objectif_code` AS `type_element_code`,`v_plan`.`type_objectif_classe` AS `type_element_classe`,`v_plan`.`libelle` AS `libelle`,`v_plan`.`attributs_desc` AS `attributs`,ifnull(concat(rtrim(`v_plan`.`responsable_nom`),\', \',`v_plan`.`responsable_prenom`),\'<nd>\') AS `responsable`,ifnull(`v_plan`.`responsable_departement_code`,\'<nd>\') AS `departement`,ifnull(`v_plan`.`responsable_direction_code`,\'<nd>\') AS `direction`,`v_plan`.`responsable_personnel_id` AS `responsable_personnel_id`,`v_plan`.`responsable_departement_id` AS `responsable_departement_id`,`v_plan`.`responsable_direction_id` AS `responsable_direction_id`,`v_plan`.`plan_code_wbs` AS `plan_code_wbs`,`v_plan`.`cible` AS `cible`,`v_plan`.`valeur` AS `valeur`,`v_plan`.`sens` AS `sens`,`v_plan`.`cible_ecart` AS `cible_ecart`,`v_plan`.`decompte` AS `decompte`,`v_plan`.`termine_decompte` AS `termine_decompte`,`v_plan`.`termine_pourcent` / 100.0 AS `termine_pourcent`,`v_plan`.`completion_pourcent` / 100.0 AS `completion_pourcent`,`v_plan`.`completion_pourcent_total` AS `completion_pourcent_total`,case when `v_plan`.`completion_pourcent` < 25 then \'  0 - 24 %\' when `v_plan`.`completion_pourcent` < 50 then \' 25 - 74 %\' when `v_plan`.`completion_pourcent` < 75 then \' 75 - 99 %\' when `v_plan`.`completion_pourcent` >= 100 then \'100 %\' else \'nd\' end AS `completion_statut`,`v_plan`.`reddition_debut_date` AS `reddition_debut_date`,`v_plan`.`reddition_fin_date` AS `reddition_fin_date`,`v_plan`.`duree` AS `duree`,`v_plan`.`jours_restants` AS `jours_restants`,`v_plan`.`cycle_pourcent` / 100.0 AS `cycle_pourcent`,case when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 2 * 365 then \'0 - 2 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 5 * 365 then \'2 - 5 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 10 * 365 then \'5 - 10 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) >= 10 * 365 then \'10 ans +\' else \'nd\' end AS `debut_date_statut`,case when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 2 * 365 then \'0 - 2 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 5 * 365 then \'2 - 5 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 10 * 365 then \'5 - 10 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) >= 10 * 365 then \'10 ans +\' else \'nd\' end AS `fin_date_statut`,case when `v_plan`.`statut_id` in (20,30) then case when `v_plan`.`debut_date` < `v_plan`.`reddition_debut_date` then \'Repoussé\' else \'En cours\' end when `v_plan`.`statut_id` = 40 then case when `v_plan`.`reddition_debut_date` <= `v_plan`.`debut_date` and `v_plan`.`reddition_fin_date` <= `v_plan`.`fin_date` then \'Respecté\' when `v_plan`.`reddition_debut_date` > `v_plan`.`debut_date` or `v_plan`.`reddition_fin_date` > `v_plan`.`fin_date` then \'Non-respecté\' end when `v_plan`.`statut_id` = 10 then \'Non-débuté\' else \'Non-applicable\' end AS `echeancier_statut`,`v_plan`.`budget_total` AS `budget_total`,`v_plan`.`budget_depense` AS `budget_depense`,`v_plan`.`budget_engage` AS `budget_engage`,`v_plan`.`budget_pourcent` / 100.0 AS `budget_pourcent`,`v_plan`.`statut` AS `statut`,`v_plan`.`reddition_date` AS `reddition_date`,`v_plan`.`budget_effectif_date` AS `budget_effectif_date`,`v_plan`.`codes_reddition_codes_desc` AS `codes_reddition`,1 AS `occurence`,case when exists(select 1 from `cbwebca_bd01`.`v_reddition_statut` where `cbwebca_bd01`.`v_reddition_statut`.`objectif_id` = `v_plan`.`objectif_id` limit 1) then 1 else 0 end AS `reddition_a_faire`,curdate() AS `maj_date` from `cbwebca_bd01`.`v_plan` where `v_plan`.`parent_id` is not null order by `v_plan`.`code_wbs`
md5=1b1c27056fad38dd1835d6526ddc2e07
updatable=0
algorithm=0
definer_user=root
definer_host=localhost
suid=2
with_check_option=0
timestamp=2021-10-24 14:08:28
create-version=2
source=select `v_plan`.`plan_id` AS `plan_id`,`v_plan`.`objectif_id` AS `objectif_id`,`v_plan`.`code_wbs` AS `code_wbs`,`v_plan`.`niveau` AS `niveau`,`v_plan`.`poids` AS `poids`,`v_plan`.`type_objectif_libelle` AS `type_element_libelle`,`v_plan`.`type_objectif_code` AS `type_element_code`,`v_plan`.`type_objectif_classe` AS `type_element_classe`,`v_plan`.`libelle` AS `libelle`,`v_plan`.`attributs_desc` AS `attributs`,ifnull(concat(rtrim(`v_plan`.`responsable_nom`),\', \',`v_plan`.`responsable_prenom`),\'<nd>\') AS `responsable`,ifnull(`v_plan`.`responsable_departement_code`,\'<nd>\') AS `departement`,ifnull(`v_plan`.`responsable_direction_code`,\'<nd>\') AS `direction`,`v_plan`.`responsable_personnel_id` AS `responsable_personnel_id`,`v_plan`.`responsable_departement_id` AS `responsable_departement_id`,`v_plan`.`responsable_direction_id` AS `responsable_direction_id`,`v_plan`.`plan_code_wbs` AS `plan_code_wbs`,`v_plan`.`cible` AS `cible`,`v_plan`.`valeur` AS `valeur`,`v_plan`.`sens` AS `sens`,`v_plan`.`cible_ecart` AS `cible_ecart`,`v_plan`.`decompte` AS `decompte`,`v_plan`.`termine_decompte` AS `termine_decompte`,`v_plan`.`termine_pourcent` / 100.0 AS `termine_pourcent`,`v_plan`.`completion_pourcent` / 100.0 AS `completion_pourcent`,`v_plan`.`completion_pourcent_total` AS `completion_pourcent_total`,case when `v_plan`.`completion_pourcent` < 25 then \'  0 - 24 %\' when `v_plan`.`completion_pourcent` < 50 then \' 25 - 74 %\' when `v_plan`.`completion_pourcent` < 75 then \' 75 - 99 %\' when `v_plan`.`completion_pourcent` >= 100 then \'100 %\' else \'nd\' end AS `completion_statut`,`v_plan`.`reddition_debut_date` AS `reddition_debut_date`,`v_plan`.`reddition_fin_date` AS `reddition_fin_date`,`v_plan`.`duree` AS `duree`,`v_plan`.`jours_restants` AS `jours_restants`,`v_plan`.`cycle_pourcent` / 100.0 AS `cycle_pourcent`,case when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 2 * 365 then \'0 - 2 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 5 * 365 then \'2 - 5 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 10 * 365 then \'5 - 10 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) >= 10 * 365 then \'10 ans +\' else \'nd\' end AS `debut_date_statut`,case when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 2 * 365 then \'0 - 2 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 5 * 365 then \'2 - 5 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 10 * 365 then \'5 - 10 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) >= 10 * 365 then \'10 ans +\' else \'nd\' end AS `fin_date_statut`,case when `v_plan`.`statut_id` in (20,30) then case when `v_plan`.`debut_date` < `v_plan`.`reddition_debut_date` then \'Repoussé\' else \'En cours\' end when `v_plan`.`statut_id` = 40 then case when `v_plan`.`reddition_debut_date` <= `v_plan`.`debut_date` and `v_plan`.`reddition_fin_date` <= `v_plan`.`fin_date` then \'Respecté\' when `v_plan`.`reddition_debut_date` > `v_plan`.`debut_date` or `v_plan`.`reddition_fin_date` > `v_plan`.`fin_date` then \'Non-respecté\' end when `v_plan`.`statut_id` = 10 then \'Non-débuté\' else \'Non-applicable\' end AS `echeancier_statut`,`v_plan`.`budget_total` AS `budget_total`,`v_plan`.`budget_depense` AS `budget_depense`,`v_plan`.`budget_engage` AS `budget_engage`,`v_plan`.`budget_pourcent` / 100.0 AS `budget_pourcent`,`v_plan`.`statut` AS `statut`,`v_plan`.`reddition_date` AS `reddition_date`,`v_plan`.`budget_effectif_date` AS `budget_effectif_date`,`v_plan`.`codes_reddition_codes_desc` AS `codes_reddition`,1 AS `occurence`,case when exists(select 1 from `v_reddition_statut` where `v_reddition_statut`.`objectif_id` = `v_plan`.`objectif_id` limit 1) then 1 else 0 end AS `reddition_a_faire`,curdate() AS `maj_date` from `v_plan` where `v_plan`.`parent_id` is not null order by `v_plan`.`code_wbs`
client_cs_name=utf8mb4
connection_cl_name=utf8mb4_unicode_ci
view_body_utf8=select `v_plan`.`plan_id` AS `plan_id`,`v_plan`.`objectif_id` AS `objectif_id`,`v_plan`.`code_wbs` AS `code_wbs`,`v_plan`.`niveau` AS `niveau`,`v_plan`.`poids` AS `poids`,`v_plan`.`type_objectif_libelle` AS `type_element_libelle`,`v_plan`.`type_objectif_code` AS `type_element_code`,`v_plan`.`type_objectif_classe` AS `type_element_classe`,`v_plan`.`libelle` AS `libelle`,`v_plan`.`attributs_desc` AS `attributs`,ifnull(concat(rtrim(`v_plan`.`responsable_nom`),\', \',`v_plan`.`responsable_prenom`),\'<nd>\') AS `responsable`,ifnull(`v_plan`.`responsable_departement_code`,\'<nd>\') AS `departement`,ifnull(`v_plan`.`responsable_direction_code`,\'<nd>\') AS `direction`,`v_plan`.`responsable_personnel_id` AS `responsable_personnel_id`,`v_plan`.`responsable_departement_id` AS `responsable_departement_id`,`v_plan`.`responsable_direction_id` AS `responsable_direction_id`,`v_plan`.`plan_code_wbs` AS `plan_code_wbs`,`v_plan`.`cible` AS `cible`,`v_plan`.`valeur` AS `valeur`,`v_plan`.`sens` AS `sens`,`v_plan`.`cible_ecart` AS `cible_ecart`,`v_plan`.`decompte` AS `decompte`,`v_plan`.`termine_decompte` AS `termine_decompte`,`v_plan`.`termine_pourcent` / 100.0 AS `termine_pourcent`,`v_plan`.`completion_pourcent` / 100.0 AS `completion_pourcent`,`v_plan`.`completion_pourcent_total` AS `completion_pourcent_total`,case when `v_plan`.`completion_pourcent` < 25 then \'  0 - 24 %\' when `v_plan`.`completion_pourcent` < 50 then \' 25 - 74 %\' when `v_plan`.`completion_pourcent` < 75 then \' 75 - 99 %\' when `v_plan`.`completion_pourcent` >= 100 then \'100 %\' else \'nd\' end AS `completion_statut`,`v_plan`.`reddition_debut_date` AS `reddition_debut_date`,`v_plan`.`reddition_fin_date` AS `reddition_fin_date`,`v_plan`.`duree` AS `duree`,`v_plan`.`jours_restants` AS `jours_restants`,`v_plan`.`cycle_pourcent` / 100.0 AS `cycle_pourcent`,case when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 2 * 365 then \'0 - 2 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 5 * 365 then \'2 - 5 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) < 10 * 365 then \'5 - 10 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_debut_date`) >= 10 * 365 then \'10 ans +\' else \'nd\' end AS `debut_date_statut`,case when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 2 * 365 then \'0 - 2 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 5 * 365 then \'2 - 5 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) < 10 * 365 then \'5 - 10 ans\' when to_days(`v_plan`.`reddition_date`) - to_days(`v_plan`.`reddition_fin_date`) >= 10 * 365 then \'10 ans +\' else \'nd\' end AS `fin_date_statut`,case when `v_plan`.`statut_id` in (20,30) then case when `v_plan`.`debut_date` < `v_plan`.`reddition_debut_date` then \'Repoussé\' else \'En cours\' end when `v_plan`.`statut_id` = 40 then case when `v_plan`.`reddition_debut_date` <= `v_plan`.`debut_date` and `v_plan`.`reddition_fin_date` <= `v_plan`.`fin_date` then \'Respecté\' when `v_plan`.`reddition_debut_date` > `v_plan`.`debut_date` or `v_plan`.`reddition_fin_date` > `v_plan`.`fin_date` then \'Non-respecté\' end when `v_plan`.`statut_id` = 10 then \'Non-débuté\' else \'Non-applicable\' end AS `echeancier_statut`,`v_plan`.`budget_total` AS `budget_total`,`v_plan`.`budget_depense` AS `budget_depense`,`v_plan`.`budget_engage` AS `budget_engage`,`v_plan`.`budget_pourcent` / 100.0 AS `budget_pourcent`,`v_plan`.`statut` AS `statut`,`v_plan`.`reddition_date` AS `reddition_date`,`v_plan`.`budget_effectif_date` AS `budget_effectif_date`,`v_plan`.`codes_reddition_codes_desc` AS `codes_reddition`,1 AS `occurence`,case when exists(select 1 from `cbwebca_bd01`.`v_reddition_statut` where `cbwebca_bd01`.`v_reddition_statut`.`objectif_id` = `v_plan`.`objectif_id` limit 1) then 1 else 0 end AS `reddition_a_faire`,curdate() AS `maj_date` from `cbwebca_bd01`.`v_plan` where `v_plan`.`parent_id` is not null order by `v_plan`.`code_wbs`
mariadb-version=100508
